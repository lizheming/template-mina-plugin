# Snapshot report for `test/test.js`

The actual snapshot is saved in `test.js.snap`.

Generated by [AVA](https://ava.li).

## defaults

> generated files

    [
      '.babelrc',
      '.editorconfig',
      '.gitattributes',
      '.gitignore',
      'LICENSE',
      'README.md',
      'package.json',
      'postcss.config.js',
      'project.config.json',
      'src/doc/README.md',
      'src/miniprogram/app.mina',
      'src/miniprogram/pages/index.mina',
      'src/plugin/components/hello-component.mina',
      'src/plugin/index.js',
      'src/plugin/pages/hello-page.mina',
      'src/plugin/plugin.mina',
      'webpack.config.babel.js',
    ]

> content of .babelrc

    `{␊
      "presets": [␊
        [␊
          "env",␊
          {␊
            "target": {␊
              "node": "7"␊
            }␊
          }␊
        ]␊
      ]␊
    }␊
    `

> content of .editorconfig

    `root = true␊
    ␊
    [*]␊
    indent_style = space␊
    indent_size = 2␊
    end_of_line = lf␊
    charset = utf-8␊
    trim_trailing_whitespace = true␊
    insert_final_newline = true␊
    ␊
    [*.md]␊
    trim_trailing_whitespace = false␊
    `

> content of .gitattributes

    `* text=auto␊
    `

> content of .gitignore

    `# dev␊
    .DS_Store␊
    node_modules␊
    npm-debug.log␊
    ␊
    # build␊
    /dist␊
    `

> content of LICENSE

    `The MIT License (MIT)␊
    ␊
    Copyright (c) lizheming <i@imnerd.org> (github.com/lizheming)␊
    ␊
    Permission is hereby granted, free of charge, to any person obtaining a copy␊
    of this software and associated documentation files (the "Software"), to deal␊
    in the Software without restriction, including without limitation the rights␊
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell␊
    copies of the Software, and to permit persons to whom the Software is␊
    furnished to do so, subject to the following conditions:␊
    ␊
    The above copyright notice and this permission notice shall be included in␊
    all copies or substantial portions of the Software.␊
    ␊
    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR␊
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,␊
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE␊
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER␊
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,␊
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN␊
    THE SOFTWARE.␊
    `

> content of README.md

    `# mina-plugin-test␊
    ␊
    > mina-plugin for tina.js␊
    ␊
    ## License␊
    ␊
    MIT &copy; lizheming␊
    `

> content of package.json

    `{␊
      "name": "mina-plugin-test",␊
      "private": true,␊
      "version": "0.0.1",␊
      "description": "mina-plugin for tina.js",␊
      "author": "lizheming",␊
      "scripts": {␊
        "clean": "rimraf './dist/!(app.json|project.config.json)**'",␊
        "prestart": "run-s clean",␊
        "prebuild": "run-s clean",␊
        "start": "webpack -w",␊
        "build": "cross-env NODE_ENV=production webpack"␊
      },␊
      "dependencies": {␊
        "@tinajs/tina": "^1.4.0",␊
        "es6-promise": "^4.1.1",␊
        "wxio": "^0.1.0"␊
      },␊
      "devDependencies": {␊
        "@tinajs/mina-entry-webpack-plugin": "^0.6.2",␊
        "@tinajs/mina-loader": "^0.6.0",␊
        "@tinajs/mina-runtime-webpack-plugin": "^0.1.4",␊
        "babel-core": "^6.26.0",␊
        "babel-loader": "^7.1.2",␊
        "babel-plugin-transform-runtime": "^6.23.0",␊
        "babel-preset-env": "^1.6.1",␊
        "babel-preset-stage-0": "^6.24.1",␊
        "cross-env": "^5.1.1",␊
        "file-loader": "^1.1.5",␊
        "npm-run-all": "^4.1.2",␊
        "postcss-loader": "^2.1.3",␊
        "postcss-px2units": "^0.1.1",␊
        "postcss-url": "^7.3.1",␊
        "precss": "^2.0.0",␊
        "relative-file-loader": "^1.1.12",␊
        "rimraf": "^2.6.2",␊
        "uglifyjs-webpack-plugin": "^1.1.2",␊
        "webpack": "^3.8.1",␊
        "wxml-loader": "^0.2.1"␊
      }␊
    }␊
    `

> content of postcss.config.js

    `module.exports = {␊
      plugins: [␊
        require('precss')(),␊
      ],␊
    }␊
    `

> content of project.config.json

    `{␊
      "appid": "",␊
      "projectname": "",␊
      "miniprogramRoot": "./dist/miniprogram",␊
      "pluginRoot": "./dist/plugin",␊
      "compileType": "plugin",␊
      "setting": {␊
        "newFeature": true␊
      },␊
      "libVersion": "2.2.0",␊
      "condition": {}␊
    }␊
    `

> content of src/doc/README.md

    `# mina-plugin-test␊
    ␊
    > mina-plugin for tina.js␊
    ␊
    ## License␊
    ␊
    MIT &copy; lizheming␊
    `

> content of src/miniprogram/app.mina

    `<config>␊
    {␊
      "pages": [␊
        "pages/index.mina"␊
      ],␊
      "plugins": {␊
        "hello-plugin": {␊
          "version": "dev",␊
          "provider": ""␊
        }␊
      }␊
    }␊
    </config>␊
    ␊
    <script>␊
    App({␊
      onLaunch() {␊
    ␊
      }␊
    })␊
    </script>␊
    `

> content of src/miniprogram/pages/index.mina

    `<config>␊
    {␊
      "usingComponents": {␊
        "hello-list": "plugin://hello-plugin/hello-component"␊
      }␊
    }␊
    </config>␊
    ␊
    <template>␊
      <navigator id="nav" url="plugin://hello-plugin/hello-page">␊
        Go to Plugin page␊
      </navigator>␊
    ␊
      <button id="add" bindtap="addItem">Add item</button>␊
    ␊
      <hello-list items="{{ items }}" />␊
    </template>␊
    ␊
    <script>␊
      import { Page } from '@tinajs/tina'␊
    ␊
      const plugin = requirePlugin("hello-plugin")␊
    ␊
      Page.define({␊
        data: {␊
          items: [],␊
          currentItem: 0␊
        },␊
        onLoad() {␊
          plugin.sayHello();␊
          const world = plugin.answer;␊
        },␊
        methods: {␊
          addItem() {␊
            this.data.items.push(this.data.currentItem++)␊
            this.setData({␊
              items: this.data.items,␊
              currentItem: this.data.currentItem␊
            })␊
          }␊
        }␊
      });␊
    </script>␊
    ␊
    <style>␊
    #nav {␊
      text-align: center;␊
      background: #eeeeee;␊
      margin: 1em;␊
      padding: 1em;␊
      border-radius: 5px;␊
    }␊
    ␊
    #add {␊
      margin: 1em;␊
    }␊
    </style>␊
    `

> content of src/plugin/components/hello-component.mina

    `<config>␊
    {␊
      "component": true,␊
      "usingComponents": {}␊
    }␊
    </config>␊
    ␊
    <template>␊
      <view class="container">␊
        <text class="item" wx:key="{{ items }}" wx:for="{{ items }}">{{ item }}</text>␊
      </view>␊
    </template>␊
    ␊
    <script>␊
    import { Component } from '@tinajs/tina';␊
    ␊
    Component.define({␊
      properties: {␊
        items: {␊
          type: Array,␊
          value: [],␊
          observer(newVal, oldVal, changedPath) {␊
            this.setData({ items: newVal })␊
          }␊
        }␊
      },␊
    ␊
      data: {␊
        items: []␊
      },␊
    ␊
      methods: {␊
    ␊
      }␊
    })␊
    </script>␊
    ␊
    <style>␊
    .container {␊
      margin: 1em;␊
    }␊
    .item {␊
      display: block;␊
    }␊
    </style>␊
    `

> content of src/plugin/index.js

    `module.exports = {␊
      sayHello: function () {␊
        console.log('Hello plugin!')␊
      },␊
      answer: 42␊
    }␊
    `

> content of src/plugin/pages/hello-page.mina

    `<config>␊
    {}␊
    </config>␊
    ␊
    <template>␊
      <text>␊
        This is a plugin page!␊
      </text>␊
    </template>␊
    ␊
    <script>␊
    import { Page } from '@tinajs/tina'␊
    ␊
    Page.define({␊
      data: {},␊
      onLoad() {␊
        console.log('This is a plugin page!')␊
      }␊
    })␊
    </script>␊
    ␊
    <style>␊
    </style>␊
    `

> content of src/plugin/plugin.mina

    `<config>␊
    {␊
      "publicComponents": {␊
        "hello-component": "components/hello-component.mina"␊
      },␊
      "pages": {␊
        "hello-page": "pages/hello-page.mina"␊
      },␊
      "main": "index.js"␊
    }␊
    </config>␊
    `

> content of webpack.config.babel.js

    `import webpack from 'webpack'␊
    import { resolve, dirname, basename } from 'path'␊
    import MinaEntryPlugin from '@tinajs/mina-entry-webpack-plugin'␊
    import MinaRuntimePlugin from '@tinajs/mina-runtime-webpack-plugin'␊
    import UglifyJsPlugin from 'uglifyjs-webpack-plugin'␊
    ␊
    const isProduction = process.env.NODE_ENV === 'production'␊
    ␊
    const loaders = {␊
      script: 'babel-loader',␊
      style: {␊
        loader: 'postcss-loader',␊
        options: {␊
          config: {␊
            path: resolve('./postcss.config.js'),␊
          },␊
        },␊
      },␊
    }␊
    ␊
    export default [␊
      'plugin/plugin.mina',␊
      'miniprogram/app.mina'␊
    ].map(entry => {␊
      const context = resolve('src', dirname(entry));␊
      const dist = resolve('dist', dirname(entry));␊
      entry = basename(entry);␊
    ␊
      return {␊
        context,␊
        entry,␊
        output: {␊
          path: dist,␊
          filename: '[name]',␊
          publicPath: '/'␊
        },␊
        module: {␊
          rules: [␊
            {␊
              test: /\\.mina$/,␊
              exclude: /node_modules/,␊
              use: [{␊
                loader: '@tinajs/mina-loader',␊
                options: {␊
                  loaders,␊
                },␊
              }],␊
            },␊
            {␊
              test: /\\.mina$/,␊
              include: /node_modules/,␊
              use: '@tinajs/mina-loader',␊
            },␊
            {␊
              test: /\\.js$/,␊
              exclude: /node_modules/,␊
              use: loaders.script,␊
            },␊
            {␊
              test: /\\.(css|wxss)$/,␊
              exclude: /node_modules/,␊
              use: loaders.style,␊
            },␊
            {␊
              test: /\\.(png|jpg|jpeg|gif|svg)$/,␊
              use: {␊
                loader: "file-loader",␊
                options: {␊
                  name: 'assets/[name].[hash:6].[ext]',␊
                },␊
              },␊
            },␊
          ],␊
        },␊
        resolve: {␊
          symlinks: true,␊
        },␊
        plugins: [␊
          new webpack.EnvironmentPlugin({␊
            NODE_ENV: 'development',␊
            DEBUG: false,␊
          }),␊
          new MinaEntryPlugin(),␊
          new MinaRuntimePlugin({␊
            runtime: './common.js',␊
          }),␊
          // new webpack.optimize.CommonsChunkPlugin({␊
          //   name: 'common.js',␊
          //   minChunks: 2,␊
          // }),␊
          isProduction && new UglifyJsPlugin(),␊
        ].filter(Boolean),␊
      };␊
    });␊
    `
